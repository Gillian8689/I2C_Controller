# I2C_Controller

### 项目介绍
* I2C控制器
    * 系统时钟和I2C时钟可配置；
    * 单字节或双字节寄存器地址可配置；
    * 单次读写或循环读写可配置。


### 时序

#### 综述
* scl为时钟信号，不传输数据时拉高；
* sda为数据信号，scl为低时变化，scl为高时稳定；
* 写数据传输：
    * 起始信号；
    * 传输七位器件地址（device_addr）和一位写（低）信号；
    * 等待一位应答（ACK）信号；
    * 确定寄存器地址；
        * 两字节寄存器：
            * 传输高八位寄存器地址；
            * 等待一位应答（ACK）信号（低）；
            * 传输低八位寄存器地址：
            * 等待一位应答（ACK）信号（低）；
        * 单字节寄存器：
            * 传输八位寄存器地址；
            * 等待一位应答（ACK）信号（低）；
    * 传输数据；
        * 单次写入：
            * 传输八位数据信号；
            * 等待一位应答（ACK）信号（低）；
        * 多次写入：
            * 传输八位数据信号；
            * 等待一位应答（ACK）信号（低）；
            * 循环以上步骤；
    * 停止位；
* 读数据传输：
    * 起始信号；
    * 传输七位器件地址（device_addr）和一位写（低）信号；
    * 等待一位应答（ACK）信号；
    * 确定寄存器地址；
        * 两字节寄存器：
            * 传输高八位寄存器地址；
            * 等待一位应答（ACK）信号；
            * 传输低八位寄存器地址：
            * 等待一位应答（ACK）信号；
        * 单字节寄存器：
            * 传输八位寄存器地址；
            * 等待一位应答（ACK）信号；
    * 起始信号；
    * 传输七位器件地址（device_addr）和一位读（高）信号；
    * 传输数据；
        * 单次读取：
            * 传输八位数据信号；
            * 输出一位应答（ACK）信号（高）；
        * 多次读取：
            * 传输八位数据信号；
            * 输出一位应答（ACK）信号（低）；
            * 循环以上步骤；
            * 传输最后一组八位数据信号；
            * 输出一位应答（ACK）信号（高），或释放sda被拉高；
    * 停止位。
    


#### 起始信号

scl:\_\_\_\_/￣￣\\_____          
sda:￣￣￣\\________

#### 停止信号

scl:\_\_\_\_/￣￣\\_____          
sda:\_\_\_\_\_\_/￣￣￣


#### 单字节寄存器单次写时序

| 起始位 | DA6 | DA5 | DA4 | DA3 | DA2 | DA1 | DA0 | Write | ACK | RA7 | RA6 | RA5 | RA4 | RA3 | RA2| RA1 | RA0 | ACK | D7 | D6 | D5 | D4 | D3 | D2 | D1 | D0 | ACK | 停止位 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| M | M | M | M | M | M | M | M | M | S | M | M | M | M | M | M | M | M | S | M | M | M | M | M | M | M | M | S | M |




